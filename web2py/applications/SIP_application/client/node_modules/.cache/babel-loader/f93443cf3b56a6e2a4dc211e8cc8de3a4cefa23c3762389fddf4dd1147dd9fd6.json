{"ast":null,"code":"// Import React and useState hook\nimport React,{useState}from'react';// Define an interface for the Student\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";// Define the initial state for the form\nconst initialFormState={name:'',email:''};// Define the StudentRegister component\nconst StudentRegister=()=>{// Use the useState hook to manage the student state\nconst[student,setStudent]=useState({name:'',email:''});const[isSubmitted,setIsSubmitted]=useState(false);const[error,setError]=useState(null);// Define the handleInputChange function\nconst handleInputChange=event=>{const{name,value}=event.target;setStudent({...student,[name]:value});};// Define the handleSubmit function\nconst handleSubmit=async event=>{event.preventDefault();// Reset the isSubmitted state\nsetIsSubmitted(false);// Validation for empty fields\nif(!student.name||!student.email){alert('Please fill in all fields');return;}// Additional validation for the username\nif(student.name.length<3){alert('The username must be at least 3 characters long');return;}// Additional validation for the email\nconst emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!emailRegex.test(student.email)){alert('Please enter a valid email');return;}try{// Check if the student already exists\nconst response=await fetch(\"http://127.0.0.1:8000/SIP_application/students/\".concat(student.email));const data=await response.json();if(data.length>0){alert('This student already exists');return;}// Send the HTTP request to the backend\nawait fetch('http://127.0.0.1:8000/SIP_application/students/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(student)});setIsSubmitted(true);// Here you can handle the server response\n}catch(err){if(err instanceof Error){setError(err.message);}else{setError('An error occurred while registering the student');}}};// Render the component\nreturn/*#__PURE__*/_jsxs(\"main\",{className:\"h-screen flex flex-col items-center justify-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl mb-4 md:mb-6 font-bold hover:drop-shadow-[0_0_0.3rem_#ffffff70] text-gray-200 hover:duration-300 text-center duration-400\",children:\"Student Register\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-b from-black from-75% to-violet-900 hover:duration-200 grid justify-items-center rounded-3xl py-6 md:py-5 shadow-md shadow-purple-600 border-[1px] hover:shadow-violet-500 hover:shadow-lg border-purple-950 w-full max-w-screen-lg mx-auto\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4 md:space-y-3 p-4 md:p-6 w-full mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm mb-2\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Student name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:student.name,onChange:handleInputChange,className:\"block w-full mt-4 hover:drop-shadow-[0_0_0.1rem_#ffffff70] duration-400 p-2 md:p-1 text-center text-gray-300 md:text-[15px] hover:text-white border border-purple-400 shadow shadow-purple-950 hover:duration-300 hover:shadow-inner hover:shadow-purple-700 rounded-full\",required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Email:\",/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:student.email,onChange:handleInputChange,className:\"block w-full mt-4 hover:drop-shadow-[0_0_0.1rem_#ffffff70] duration-400 p-2 md:p-1 text-center text-gray-300 md:text-[15px] hover:text-white border border-purple-400 shadow shadow-purple-950 hover:duration-300 hover:shadow-inner hover:shadow-purple-700 rounded-full\",required:true})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"block w-full mt-4 hover:drop-shadow-[0_0_0.1rem_#ffffff70] duration-400 p-2 md:p-1 text-center text-gray-300 md:text-[15px] hover:text-white border border-purple-400 shadow shadow-purple-950 hover:duration-300 hover:shadow-inner hover:shadow-purple-700 rounded-full\",children:\"Register\"}),isSubmitted&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-center text-green-300\",children:\"Student has been registered successfully!\"}),error&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-4 text-center text-red-400\",children:[\"Error registering student: \",error]})]})})]});};// Export the StudentRegister component\nexport default StudentRegister;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","initialFormState","name","email","StudentRegister","student","setStudent","isSubmitted","setIsSubmitted","error","setError","handleInputChange","event","value","target","handleSubmit","preventDefault","alert","length","emailRegex","test","response","fetch","concat","data","json","method","headers","body","JSON","stringify","err","Error","message","className","children","onSubmit","type","onChange","required"],"sources":["/home/jegomez/Web2py_application/web2py/applications/SIP_application/client/src/components/studentRegister.tsx"],"sourcesContent":["// Import React and useState hook\nimport React, { useState } from 'react';\n\n// Define an interface for the Student\ninterface Student {\n    name: string;\n    email: string;\n}\n\n// Define the initial state for the form\nconst initialFormState = {\n    name: '',\n    email: ''\n};\n\n// Define the StudentRegister component\nconst StudentRegister = () => {\n    // Use the useState hook to manage the student state\n    const [student, setStudent] = useState<Student>({ name: '', email: '' });\n    const [isSubmitted, setIsSubmitted] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n\n    // Define the handleInputChange function\n    const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = event.target;\n        setStudent({ ...student, [name]: value });\n    };\n\n    // Define the handleSubmit function\n    const handleSubmit = async (event: React.FormEvent) => {\n        event.preventDefault();\n    \n        // Reset the isSubmitted state\n        setIsSubmitted(false);\n    \n        // Validation for empty fields\n        if (!student.name || !student.email) {\n            alert('Please fill in all fields');\n            return;\n        }\n    \n        // Additional validation for the username\n        if (student.name.length < 3) {\n            alert('The username must be at least 3 characters long');\n            return;\n        }\n    \n        // Additional validation for the email\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        if (!emailRegex.test(student.email)) {\n            alert('Please enter a valid email');\n            return;\n        }\n    \n        try {\n            // Check if the student already exists\n            const response = await fetch(`http://127.0.0.1:8000/SIP_application/students/${student.email}`);\n            const data = await response.json();\n    \n            if (data.length > 0) {\n                alert('This student already exists');\n                return;\n            }\n    \n            // Send the HTTP request to the backend\n            await fetch('http://127.0.0.1:8000/SIP_application/students/register', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(student)\n            });\n            setIsSubmitted(true);\n    \n            // Here you can handle the server response\n        } catch (err) {\n            if (err instanceof Error) {\n                setError(err.message);\n            } else {\n                setError('An error occurred while registering the student');\n            }\n        }\n    };\n\n    // Render the component\n    return (\n        <main className=\"h-screen flex flex-col items-center justify-center\">\n            <h2 className=\"text-4xl mb-4 md:mb-6 font-bold hover:drop-shadow-[0_0_0.3rem_#ffffff70] text-gray-200 hover:duration-300 text-center duration-400\">Student Register</h2>\n            <div className='bg-gradient-to-b from-black from-75% to-violet-900 hover:duration-200 grid justify-items-center rounded-3xl py-6 md:py-5 shadow-md shadow-purple-600 border-[1px] hover:shadow-violet-500 hover:shadow-lg border-purple-950 w-full max-w-screen-lg mx-auto'>\n                <form onSubmit={handleSubmit} className=\"space-y-4 md:space-y-3 p-4 md:p-6 w-full mx-auto\">\n                    <div className=\"text-sm mb-2\">\n                        <label>\n                            Student name:\n                            <input type=\"text\" name=\"name\" value={student.name} onChange={handleInputChange} className=\"block w-full mt-4 hover:drop-shadow-[0_0_0.1rem_#ffffff70] duration-400 p-2 md:p-1 text-center text-gray-300 md:text-[15px] hover:text-white border border-purple-400 shadow shadow-purple-950 hover:duration-300 hover:shadow-inner hover:shadow-purple-700 rounded-full\" required />\n                        </label>\n                        <label>\n                            Email:\n                            <input type=\"email\" name=\"email\" value={student.email} onChange={handleInputChange} className=\"block w-full mt-4 hover:drop-shadow-[0_0_0.1rem_#ffffff70] duration-400 p-2 md:p-1 text-center text-gray-300 md:text-[15px] hover:text-white border border-purple-400 shadow shadow-purple-950 hover:duration-300 hover:shadow-inner hover:shadow-purple-700 rounded-full\" required />\n                        </label>\n                    </div>\n                    <button type=\"submit\" className=\"block w-full mt-4 hover:drop-shadow-[0_0_0.1rem_#ffffff70] duration-400 p-2 md:p-1 text-center text-gray-300 md:text-[15px] hover:text-white border border-purple-400 shadow shadow-purple-950 hover:duration-300 hover:shadow-inner hover:shadow-purple-700 rounded-full\">Register</button>\n                    {isSubmitted && <p className=\"mt-4 text-center text-green-300\">Student has been registered successfully!</p>}\n                    {error && <p className=\"mt-4 text-center text-red-400\">Error registering student: {error}</p>}\n                </form>\n            </div>\n        </main>\n    );\n};\n\n// Export the StudentRegister component\nexport default StudentRegister;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}