{"ast":null,"code":"import React,{useState}from'react';// Component for subject assignment\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function SubjectAssignment(_ref){let{subjects,studentId}=_ref;const[selectedSubjects,setSelectedSubjects]=useState([]);// Handle checkbox change\nconst handleCheckboxChange=(event,subjectId)=>{if(event.target.checked){setSelectedSubjects([...selectedSubjects,subjectId]);}else{setSelectedSubjects(selectedSubjects.filter(id=>id!==subjectId));}};// Function to submit selected subjects\nconst submitSelectedSubjects=async(studentId,selectedSubjects)=>{const response=await fetch('http://127.0.0.1:8000/SIP_application/subjects/subjects_data',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({studentId,selectedSubjects})});if(!response.ok){throw new Error('Error submitting selected subjects');}};// Handle form submission\nconst handleSubmit=async event=>{event.preventDefault();// Submit selected subjects for the student\ntry{await submitSelectedSubjects(studentId,selectedSubjects);}catch(error){console.error(error);}};// Render component\nreturn/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table-auto\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Subject\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Select\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:subjects.map(subject=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:subject.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onChange:event=>handleCheckboxChange(event,subject.id)})})]},subject.id))})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",children:\"Submit\"})]});}","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","SubjectAssignment","_ref","subjects","studentId","selectedSubjects","setSelectedSubjects","handleCheckboxChange","event","subjectId","target","checked","filter","id","submitSelectedSubjects","response","fetch","method","headers","body","JSON","stringify","ok","Error","handleSubmit","preventDefault","error","console","onSubmit","children","className","map","subject","name","type","onChange"],"sources":["/home/jegomez/Web2py_application/web2py/applications/SIP_application/client/src/components/StudentSubjectAdd.tsx"],"sourcesContent":["import React, { useState } from 'react';\n\n// Component for subject assignment\nexport function SubjectAssignment({ subjects, studentId }) {\n    const [selectedSubjects, setSelectedSubjects] = useState([]);\n\n    // Handle checkbox change\n    const handleCheckboxChange = (event, subjectId) => {\n        if (event.target.checked) {\n            setSelectedSubjects([...selectedSubjects, subjectId]);\n        } else {\n            setSelectedSubjects(selectedSubjects.filter(id => id !== subjectId));\n        }\n    };\n\n    // Function to submit selected subjects\n    const submitSelectedSubjects = async (studentId, selectedSubjects) => {\n        const response = await fetch('http://127.0.0.1:8000/SIP_application/subjects/subjects_data', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                studentId,\n                selectedSubjects,\n            }),\n        });\n\n        if (!response.ok) {\n            throw new Error('Error submitting selected subjects');\n        }\n    };\n\n    // Handle form submission\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n\n        // Submit selected subjects for the student\n        try {\n            await submitSelectedSubjects(studentId, selectedSubjects);\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    // Render component\n    return (\n        <form onSubmit={handleSubmit}>\n            <table className=\"table-auto\">\n                <thead>\n                    <tr>\n                        <th>Subject</th>\n                        <th>Select</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {subjects.map(subject => (\n                        <tr key={subject.id}>\n                            <td>{subject.name}</td>\n                            <td>\n                                <input type=\"checkbox\" onChange={event => handleCheckboxChange(event, subject.id)} />\n                            </td>\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n            <button type=\"submit\" className=\"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\">\n                Submit\n            </button>\n        </form>\n    );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CAEvC;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACA,MAAO,SAAS,CAAAC,iBAAiBA,CAAAC,IAAA,CAA0B,IAAzB,CAAEC,QAAQ,CAAEC,SAAU,CAAC,CAAAF,IAAA,CACrD,KAAM,CAACG,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAE5D;AACA,KAAM,CAAAW,oBAAoB,CAAGA,CAACC,KAAK,CAAEC,SAAS,GAAK,CAC/C,GAAID,KAAK,CAACE,MAAM,CAACC,OAAO,CAAE,CACtBL,mBAAmB,CAAC,CAAC,GAAGD,gBAAgB,CAAEI,SAAS,CAAC,CAAC,CACzD,CAAC,IAAM,CACHH,mBAAmB,CAACD,gBAAgB,CAACO,MAAM,CAACC,EAAE,EAAIA,EAAE,GAAKJ,SAAS,CAAC,CAAC,CACxE,CACJ,CAAC,CAED;AACA,KAAM,CAAAK,sBAAsB,CAAG,KAAAA,CAAOV,SAAS,CAAEC,gBAAgB,GAAK,CAClE,KAAM,CAAAU,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,8DAA8D,CAAE,CACzFC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBjB,SAAS,CACTC,gBACJ,CAAC,CACL,CAAC,CAAC,CAEF,GAAI,CAACU,QAAQ,CAACO,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,CAAC,oCAAoC,CAAC,CACzD,CACJ,CAAC,CAED;AACA,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAhB,KAAK,EAAK,CAClCA,KAAK,CAACiB,cAAc,CAAC,CAAC,CAEtB;AACA,GAAI,CACA,KAAM,CAAAX,sBAAsB,CAACV,SAAS,CAAEC,gBAAgB,CAAC,CAC7D,CAAE,MAAOqB,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACxB,CACJ,CAAC,CAED;AACA,mBACI1B,KAAA,SAAM4B,QAAQ,CAAEJ,YAAa,CAAAK,QAAA,eACzB7B,KAAA,UAAO8B,SAAS,CAAC,YAAY,CAAAD,QAAA,eACzB/B,IAAA,UAAA+B,QAAA,cACI7B,KAAA,OAAA6B,QAAA,eACI/B,IAAA,OAAA+B,QAAA,CAAI,SAAO,CAAI,CAAC,cAChB/B,IAAA,OAAA+B,QAAA,CAAI,QAAM,CAAI,CAAC,EACf,CAAC,CACF,CAAC,cACR/B,IAAA,UAAA+B,QAAA,CACK1B,QAAQ,CAAC4B,GAAG,CAACC,OAAO,eACjBhC,KAAA,OAAA6B,QAAA,eACI/B,IAAA,OAAA+B,QAAA,CAAKG,OAAO,CAACC,IAAI,CAAK,CAAC,cACvBnC,IAAA,OAAA+B,QAAA,cACI/B,IAAA,UAAOoC,IAAI,CAAC,UAAU,CAACC,QAAQ,CAAE3B,KAAK,EAAID,oBAAoB,CAACC,KAAK,CAAEwB,OAAO,CAACnB,EAAE,CAAE,CAAE,CAAC,CACrF,CAAC,GAJAmB,OAAO,CAACnB,EAKb,CACP,CAAC,CACC,CAAC,EACL,CAAC,cACRf,IAAA,WAAQoC,IAAI,CAAC,QAAQ,CAACJ,SAAS,CAAC,2EAA2E,CAAAD,QAAA,CAAC,QAE5G,CAAQ,CAAC,EACP,CAAC,CAEf","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}