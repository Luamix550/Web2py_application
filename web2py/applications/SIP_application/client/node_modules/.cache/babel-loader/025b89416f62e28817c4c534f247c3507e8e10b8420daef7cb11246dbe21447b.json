{"ast":null,"code":"// Import React and useState hook\nimport React,{useState}from'react';// Define an interface for the Student\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";// Define the StudentRegister component\nconst StudentRegister=()=>{// Use the useState hook to manage the student state\nconst[student,setStudent]=useState({name:'',email:''});const[isSubmitted,setIsSubmitted]=useState(false);const[error,setError]=useState(null);// Define the handleInputChange function\nconst handleInputChange=event=>{const{name,value}=event.target;setStudent({...student,[name]:value});};// Define the handleSubmit function\nconst handleSubmit=async event=>{event.preventDefault();// Reset the isSubmitted and error states\nsetIsSubmitted(false);setError(null);// Validation for empty fields\nif(!student.name||!student.email){alert('Please fill in all fields');return;}// Additional validation for the username\nif(student.name.length<3){alert('The username must be at least 3 characters long');return;}// Additional validation for the email\nconst emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!emailRegex.test(student.email)){alert('Please enter a valid email');return;}// API call\ntry{const response=await fetch('http://127.0.0.1:8000/SIP_application/students/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(student)});console.log(response);if(!response.ok){throw new Error(\"The user has already been created\");}setIsSubmitted(true);}catch(error){if(error instanceof Error){setError(error.message);}else{console.error(error);}}};// Render the component\nreturn/*#__PURE__*/_jsxs(\"main\",{className:\"h-screen flex flex-col items-center justify-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl mb-4 md:mb-6 font-bold hover:drop-shadow-[0_0_0.3rem_#ffffff70] text-gray-200 hover:duration-300 text-center duration-400\",children:\"Student Register\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-b from-black from-75% to-violet-900 hover:duration-200 grid justify-items-center rounded-3xl py-6 md:py-5 shadow-md shadow-purple-600 border-[1px] hover:shadow-violet-500 hover:shadow-lg border-purple-950 w-full max-w-screen-lg mx-auto\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4 md:space-y-3 p-4 md:p-6 w-full mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm mb-2\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Student name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:student.name,onChange:handleInputChange,className:\"block w-full mt-4 hover:drop-shadow-[0_0_0.1rem_#ffffff70] duration-400 p-2 md:p-1 text-center text-gray-300 md:text-[15px] hover:text-white border border-purple-400 shadow shadow-purple-950 hover:duration-300 hover:shadow-inner hover:shadow-purple-700 rounded-full\",required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Email:\",/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:student.email,onChange:handleInputChange,className:\"block w-full mt-4 hover:drop-shadow-[0_0_0.1rem_#ffffff70] duration-400 p-2 md:p-1 text-center text-gray-300 md:text-[15px] hover:text-white border border-purple-400 shadow shadow-purple-950 hover:duration-300 hover:shadow-inner hover:shadow-purple-700 rounded-full\",required:true})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"block w-full mt-4 hover:drop-shadow-[0_0_0.1rem_#ffffff70] duration-400 p-2 md:p-1 text-center text-gray-300 md:text-[15px] hover:text-white border border-purple-400 shadow shadow-purple-950 hover:duration-300 hover:shadow-inner hover:shadow-purple-700 rounded-full\",children:\"Register\"}),isSubmitted&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-center text-green-300\",children:\"Student has been registered successfully!\"}),error&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-4 text-center text-red-400\",children:[\"Error registering student: \",error]})]})})]});};// Export the StudentRegister component\nexport default StudentRegister;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","StudentRegister","student","setStudent","name","email","isSubmitted","setIsSubmitted","error","setError","handleInputChange","event","value","target","handleSubmit","preventDefault","alert","length","emailRegex","test","response","fetch","method","headers","body","JSON","stringify","console","log","ok","Error","message","className","children","onSubmit","type","onChange","required"],"sources":["/home/jegomez/Web2py_application/web2py/applications/SIP_application/client/src/components/studentRegister.tsx"],"sourcesContent":["// Import React and useState hook\nimport React, { useState } from 'react';\n\n// Define an interface for the Student\ninterface Student {\n    name: string;\n    email: string;\n}\n\n// Define the StudentRegister component\nconst StudentRegister = () => {\n    // Use the useState hook to manage the student state\n    const [student, setStudent] = useState<Student>({ name: '', email: '' });\n    const [isSubmitted, setIsSubmitted] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n\n    // Define the handleInputChange function\n    const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = event.target;\n        setStudent({ ...student, [name]: value });\n    };\n\n    // Define the handleSubmit function\nconst handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n\n    // Reset the isSubmitted and error states\n    setIsSubmitted(false);\n    setError(null);\n\n    // Validation for empty fields\n    if (!student.name || !student.email) {\n        alert('Please fill in all fields');\n        return;\n    }\n\n    // Additional validation for the username\n    if (student.name.length < 3) {\n        alert('The username must be at least 3 characters long');\n        return;\n    }\n\n    // Additional validation for the email\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(student.email)) {\n        alert('Please enter a valid email');\n        return;\n    }\n\n    // API call\n    try {\n        const response = await fetch('http://127.0.0.1:8000/SIP_application/students/register', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(student)\n        });\n        console.log(response)\n    \n        if (!response.ok) {\n            throw new Error(`The user has already been created`);\n        }\n    \n        setIsSubmitted(true);\n\n    } catch (error) {\n        if (error instanceof Error) {\n            setError(error.message);\n        } else {\n            console.error(error);\n        }\n    }\n};\n\n    // Render the component\n    return (\n        <main className=\"h-screen flex flex-col items-center justify-center\">\n            <h2 className=\"text-4xl mb-4 md:mb-6 font-bold hover:drop-shadow-[0_0_0.3rem_#ffffff70] text-gray-200 hover:duration-300 text-center duration-400\">Student Register</h2>\n            <div className='bg-gradient-to-b from-black from-75% to-violet-900 hover:duration-200 grid justify-items-center rounded-3xl py-6 md:py-5 shadow-md shadow-purple-600 border-[1px] hover:shadow-violet-500 hover:shadow-lg border-purple-950 w-full max-w-screen-lg mx-auto'>\n                <form onSubmit={handleSubmit} className=\"space-y-4 md:space-y-3 p-4 md:p-6 w-full mx-auto\">\n                    <div className=\"text-sm mb-2\">\n                        <label>\n                            Student name:\n                            <input type=\"text\" name=\"name\" value={student.name} onChange={handleInputChange} className=\"block w-full mt-4 hover:drop-shadow-[0_0_0.1rem_#ffffff70] duration-400 p-2 md:p-1 text-center text-gray-300 md:text-[15px] hover:text-white border border-purple-400 shadow shadow-purple-950 hover:duration-300 hover:shadow-inner hover:shadow-purple-700 rounded-full\" required />\n                        </label>\n                        <label>\n                            Email:\n                            <input type=\"email\" name=\"email\" value={student.email} onChange={handleInputChange} className=\"block w-full mt-4 hover:drop-shadow-[0_0_0.1rem_#ffffff70] duration-400 p-2 md:p-1 text-center text-gray-300 md:text-[15px] hover:text-white border border-purple-400 shadow shadow-purple-950 hover:duration-300 hover:shadow-inner hover:shadow-purple-700 rounded-full\" required />\n                        </label>\n                    </div>\n                    <button type=\"submit\" className=\"block w-full mt-4 hover:drop-shadow-[0_0_0.1rem_#ffffff70] duration-400 p-2 md:p-1 text-center text-gray-300 md:text-[15px] hover:text-white border border-purple-400 shadow shadow-purple-950 hover:duration-300 hover:shadow-inner hover:shadow-purple-700 rounded-full\">Register</button>\n                    {isSubmitted && <p className=\"mt-4 text-center text-green-300\">Student has been registered successfully!</p>}\n                    {error && <p className=\"mt-4 text-center text-red-400\">Error registering student: {error}</p>}\n                </form>\n            </div>\n        </main>\n    );\n};\n\n// Export the StudentRegister component\nexport default StudentRegister;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}